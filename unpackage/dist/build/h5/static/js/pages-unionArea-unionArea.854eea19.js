(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-unionArea-unionArea"],{"3a3a":function(i,t,e){"use strict";(function(i){var n=e("4ea4");e("4160"),e("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(e("5530")),l=i.database(),s={props:{user:{default:function(){return{}}}},data:function(){return{isVisitor:!0,isVip:!1,isAdmin:!1,loading:!1,btnName:"购买联盟令牌",oneYuanDetailDialogVisible:!1,blindChooseDetailDialogVisible:!1,unionAreaCountDialogVisible:!1,chooseRechargeDialogVisible:!1,offlineDetailDialogVisible:!1,dueToTime:0,showVodeo:!1,luckyDraw:{dialogVisible:!1,count:1,awards:[]},blindChoose:{dialogVisible:!1,count:1},offlineActivity:[]}},methods:{createBlindChoose:function(i){this.blindChoose.count=i;var t=$(".blind-choose-results");t.html(""),this.animateFun(i,0,t)},createLucky1:function(t){var e=this;this.luckyDraw.count=t;var n=$(".lucky-draw-results");n.html(""),this.luckyDraw.awards=[],document.querySelector("video").playbackRate=2,i.callFunction({name:"create_lucky",data:{count:t,phone:this.user.phone,user_id:this.user._id},success:function(i){console.log("success"),e.luckyDraw.awards=i.result,e.animateFun(t,0,n),e.$nextTick((function(){document.querySelector("video").playbackRate=1}))},fail:function(i){e.$nextTick((function(){document.querySelector("video").playbackRate=1})),console.log("fail"),console.log(i)}})},animateFun:function(i,t,e){var n=this;if(t<i){var a=$("<li></li>");a.html(this.luckyDraw.awards[t].name),a.appendTo(e),a.animate({},(function(){a.css({transform:"scale(1)"});var l=0,s=0,o=0;t>4?(o=0,s=20.4*(t-5)+"%",a.animate({bottom:o,left:s,"margin-top":0,"margin-left":0},300,(function(){n.animateFun(i,t+1,e)}))):t<=4&&i>1&&(l=0,s=20.4*t+"%",a.animate({top:l,left:s,"margin-top":0,"margin-left":0},300,(function(){n.animateFun(i,t+1,e)})))}))}},openLuckyDraw:function(){var i=this;$(".lucky-draw-results").html(""),this.luckyDraw.dialogVisible=!0,this.$nextTick((function(){document.querySelector("video").addEventListener("play",(function(){i.showVodeo=!0}),!1)}))},openBlindChoose:function(){$(".blind-choose-results").html(""),this.blindChoose.dialogVisible=!0},oneYuanDetail:function(){this.oneYuanDetailDialogVisible=!0},offlineDetail:function(){this.offlineDetailDialogVisible=!0},BlindChooseDetail:function(){this.blindChooseDetailDialogVisible=!0},openRecharge:function(i,t){var e=this;this.$confirm("您将支付"+t+"元购买"+i+"个月的联盟令牌，是否确定？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){t.value;var n=(0,a.default)({},e.user);n.due_to=(new Date).getTime()+30*i*24*60*60*1e3,e.isVisitor?(n.user_type="vip",n.lucky_integral=0,n.energy_integral=0,n.zaomeng_integral=0,n.no_overdue=!0):e.isVip&&(n.lucky_integral=n.lucky_integral,n.energy_integral=n.energy_integral,n.zaomeng_integral=n.zaomeng_integral,n.no_overdue=!0);var l={item:n,success:"欢迎加入造梦联盟",error:"加入失败",children:"unionArea",backFun:["init"]};e.$emit("submitUser",l),e.chooseRechargeDialogVisible=!1})).catch((function(){}))},getOfflineActivity:function(){var i=this;this.offlineActivity=[];var t=(new Date).getTime();l.collection("offline_activity").get().then((function(e){e.result.data.length&&e.result.data.forEach((function(e){t<=new Date(e.time).getTime()&&i.offlineActivity.push(e)}))}))},init:function(){this.user.due_to&&(this.dueToTime=this.handleTime(this.user.due_to),this.judgeVip(),this.getOfflineActivity()),"visitor"==this.user.user_type?(this.isVisitor=!0,this.isVip=!1,this.isAdmin=!1):"vip"==this.user.user_type?(this.isVisitor=!1,this.isVip=!0,this.isAdmin=!1):"admin"==this.user.user_type&&(this.isVisitor=!1,this.isVip=!1,this.isAdmin=!0)},handleTime:function(i){var t=new Date(i),e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return n<10&&(n="0"+n),e+"-"+n+"-"+a},judgeVip:function(){var i=(new Date).getTime();if(i>this.user.due_to&&this.user.no_overdue){this.user.no_overdue=!1,this.btnName="联盟令牌续费";var t=(0,a.default)({},this.user),e={item:t,success:"您的联盟令牌已到期",error:"服务器错误",children:"unionArea",backFun:["init"]};this.$emit("submitUser",e)}}},created:function(){this.init()}};t.default=s}).call(this,e("a9ff")["default"])},"750d":function(i,t,e){"use strict";e.r(t);var n=e("3a3a"),a=e.n(n);for(var l in n)"default"!==l&&function(i){e.d(t,i,(function(){return n[i]}))}(l);t["default"]=a.a},"76fa":function(i,t,e){i.exports=e.p+"static/media/lucky_draw.ff892407.mp4"},b906:function(i,t,e){"use strict";var n;e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return l})),e.d(t,"a",(function(){return n}));var a=function(){var i=this,t=i.$createElement,n=i._self._c||t;return n("v-uni-view",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:i.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],class:["union-area",i.isVisitor?"union-bg":""]},[i.isVisitor?n("el-row",{staticClass:"union-box visitor-model"},[n("el-col",{staticClass:"visitor-title"},[i._v("造梦联盟成员福利")]),n("el-col",[n("p",[i._v("1、联盟成员可开启"),n("span",[i._v("联盟任务")]),i._v("。")]),n("p",[i._v("2、联盟成员完成普通任务获得的“造梦积分”均为"),n("span",[i._v("1.5倍，购买积分可获得1.5倍")]),i._v("。")]),n("p",[i._v("3、联盟成员可"),n("span",[i._v("参与造梦积分抽奖")]),i._v("，"),n("a",{staticStyle:{color:"#007AFF"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.oneYuanDetail.apply(void 0,arguments)}}},[i._v("查看详情")])]),n("p",[i._v("4、联盟成员可参与“置换商品”竞拍，不定时会有一批商品进行"),n("span",[i._v("超低价竞拍")]),i._v("。")]),n("p",[i._v("5、联盟成员可体验、购买、竞拍"),n("span",[i._v("珍藏版和限量版商品")]),i._v("。")]),n("p",[i._v("6、联盟成员消耗积分可参与"),n("span",[i._v("实体店每周组织的各项室内活动、室外活动，")]),n("a",{staticStyle:{color:"#007AFF"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.offlineDetail.apply(void 0,arguments)}}},[i._v("查看详情")]),i._v("。")])]),n("el-col",{staticClass:"visitor-title"},[i._v("怎样加入造梦联盟")]),n("el-col",[n("p",[n("span",[i._v("购买联盟令牌")]),i._v("即可加入联盟。")])])],1):i._e(),i.isVip?n("el-row",{staticClass:"union-box vip-model"},[n("div",{staticClass:"vip-box"},[n("el-col",{staticClass:"vip-title",attrs:{span:24}},[i._v("成员信息："),n("i",{staticClass:"el-icon-question",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.unionAreaCountDialogVisible=!0}}})]),n("el-col",{attrs:{span:24}},[n("a",[i._v("令牌到期时间：")]),n("span",[i._v(i._s(i.dueToTime))])]),n("el-col",{attrs:{span:24}},[n("a",[i._v("造梦积分：")]),n("span",[i._v(i._s(i.user.zaomeng_integral))])]),n("el-col",{attrs:{span:12}},[n("a",[i._v("可用押金：")]),n("span",[i._v(i._s(i.user.deposit+"元"))])]),n("el-col",{attrs:{span:12}},[n("a",[i._v("冻结押金：")]),n("span",[i._v(i._s(i.user.freeze_deposit+"元"))])])],1),n("div",{staticClass:"vip-box"},[n("el-col",{staticClass:"vip-title",attrs:{span:24}},[i._v("抽奖"),n("i",{staticClass:"el-icon-question",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.oneYuanDetailDialogVisible=!0}}})]),n("el-col",{staticStyle:{"justify-content":"space-between"},attrs:{span:12}},[n("a",{attrs:{plain:!0}},[i._v("我的奖品：")]),n("el-button",{attrs:{plain:!0}},[i._v("查看奖品")])],1),n("el-col",{staticStyle:{"justify-content":"flex-end"},attrs:{span:12}},[n("el-button",{attrs:{plain:!0},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.openLuckyDraw.apply(void 0,arguments)}}},[i._v("去抽奖")])],1)],1),n("div",{staticClass:"vip-box"},[n("el-col",{staticClass:"vip-title",attrs:{span:24}},[i._v("实体店活动"),n("i",{staticClass:"el-icon-question",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.offlineDetailDialogVisible=!0}}})]),i._l(i.offlineActivity,(function(t,e){return n("el-col",{staticClass:"activity-list"},[n("span",[i._v(i._s(t.time))]),n("span",[i._v(i._s(t.name))]),n("span",[i._v(i._s(t.province+t.city+t.region+t.address))])])}))],2),n("div",{staticClass:"vip-box"},[n("el-col",{staticClass:"vip-title",attrs:{span:24}},[i._v("好运速递")]),n("el-col",{staticClass:"goodLuck-message"},[n("p",[n("a",[i._v("名字：")]),n("span",[i._v("恭喜XXX获得免费体验券一张")])])])],1)]):i._e(),i.isVisitor||!i.user.no_overdue?n("el-row",{staticClass:"bottom-btn"},[n("el-button",{staticClass:"ad-union-btn",attrs:{plain:!0},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.chooseRechargeDialogVisible=!0}}},[i._v(i._s(i.btnName))])],1):i._e(),n("el-dialog",{attrs:{title:"购买联盟令牌",visible:i.chooseRechargeDialogVisible,width:"90%"},on:{"update:visible":function(t){arguments[0]=t=i.$handleEvent(t),i.chooseRechargeDialogVisible=t}}},[n("el-row",{staticClass:"recharge-dialog"},[n("el-col",{attrs:{span:12}},[n("el-button",{on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.openRecharge(1,58)}}},[n("span",{staticStyle:{"font-weight":"700"}},[i._v("1个月")]),i._v("(￥58)")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.openRecharge(3,165)}}},[n("span",{staticStyle:{"font-weight":"700"}},[i._v("3个月")]),i._v("(￥165)")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.openRecharge(6,313)}}},[n("span",{staticStyle:{"font-weight":"700"}},[i._v("6个月")]),i._v("(￥313)")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.openRecharge(12,591)}}},[n("span",{staticStyle:{"font-weight":"700"}},[i._v("12个月")]),i._v("(￥591)")])],1)],1)],1),n("el-dialog",{attrs:{title:"造梦积分抽奖介绍",visible:i.oneYuanDetailDialogVisible,width:"90%"},on:{"update:visible":function(t){arguments[0]=t=i.$handleEvent(t),i.oneYuanDetailDialogVisible=t}}},[n("el-row",{staticClass:"dialog-detail"},[n("el-col",[i._v("1、"),n("span",[i._v("消耗20点造梦积分")]),i._v("可进行一次抽奖。")]),n("el-col",[i._v("2、惊喜奖品：造梦积分（5~100点），联盟任务积分倍数券（1.5~3倍，1~7天），普通商品体验折扣券（3~9.5折），珍贵商品体验折扣券（3~9.5折），普通商品免费体验券（只需押金）。")]),n("el-col",[i._v("3、使用免费体验券时，可自由选择一个商品，"),n("span",[i._v("体验7天")]),i._v("，"),n("span",[i._v("超出的时间")]),i._v("则直接从该商品的押金中"),n("span",[i._v("扣除一定的费用")]),i._v("，详见具体商品。")])],1)],1),n("el-dialog",{attrs:{title:"实体店活动介绍",visible:i.offlineDetailDialogVisible,width:"90%"},on:{"update:visible":function(t){arguments[0]=t=i.$handleEvent(t),i.offlineDetailDialogVisible=t}}},[n("el-row",{staticClass:"dialog-detail"},[n("el-col",[i._v("1、线下实体店会在"),n("span",[i._v("每周六、周日")]),i._v("组织活动，"),n("span",[i._v("联盟成员")]),i._v("可通过消耗一定的积分参与活动，"),n("span",[i._v("非联盟成员")]),i._v("需不可通过消耗积分参与活动。")]),n("el-col",[i._v("2、每周六的活动为"),n("span",[i._v("“主题活动”")]),i._v("，本周的主题活动结束后，会宣布下一周的活动主题。")]),n("el-col",[i._v("3、每周日的活动为"),n("span",[i._v("“室外活动”")]),i._v("，本周的室外活动结束后，会宣布下一周的活动内容。")])],1)],1),n("el-dialog",{attrs:{title:"联盟福利",visible:i.unionAreaCountDialogVisible,width:"90%"},on:{"update:visible":function(t){arguments[0]=t=i.$handleEvent(t),i.unionAreaCountDialogVisible=t}}},[n("el-row",{staticClass:"dialog-detail"},[n("p",[i._v("1、联盟成员可开启"),n("span",[i._v("联盟任务")]),i._v("。")]),n("p",[i._v("2、联盟成员完成普通任务获得的“造梦积分”均为"),n("span",[i._v("1.5倍，购买积分可获得1.5倍")]),i._v("。")]),n("p",[i._v("3、联盟成员可"),n("span",[i._v("参与造梦积分抽奖")]),i._v("，"),n("a",{staticStyle:{color:"#007AFF"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.oneYuanDetail.apply(void 0,arguments)}}},[i._v("查看详情")])]),n("p",[i._v("4、联盟成员可参与“置换商品”竞拍，不定时会有一批商品进行"),n("span",[i._v("超低价竞拍")]),i._v("。")]),n("p",[i._v("5、联盟成员可体验、购买、竞拍"),n("span",[i._v("珍藏版和限量版商品")]),i._v("。")]),n("p",[i._v("6、联盟成员消耗积分可参与"),n("span",[i._v("实体店每周组织的各项室内活动、室外活动，")]),n("a",{staticStyle:{color:"#007AFF"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.offlineDetail.apply(void 0,arguments)}}},[i._v("查看详情")]),i._v("。")])])],1),n("el-dialog",{staticClass:"lucky-draw",attrs:{title:"",visible:i.luckyDraw.dialogVisible,width:"100%"},on:{"update:visible":function(t){arguments[0]=t=i.$handleEvent(t),i.$set(i.luckyDraw,"dialogVisible",t)}}},[n("div",{staticClass:"bg-video"},[n("v-uni-video",{directives:[{name:"show",rawName:"v-show",value:i.showVodeo,expression:"showVodeo"}],attrs:{src:e("76fa"),autoplay:!0,loop:!0,"object-fit":"fill"}})],1),n("el-row",{staticClass:"lucky-draw-content"},[n("el-col",[n("el-button",{attrs:{plain:!0},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.createLucky1(1)}}},[i._v("抽奖1次")]),n("el-button",{attrs:{plain:!0},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.createLucky1(10)}}},[i._v("抽奖10次")])],1)],1),n("div",{staticClass:"lucky-draw-results"})],1)],1)},l=[]},c6d8:function(i,t,e){"use strict";e.r(t);var n=e("b906"),a=e("750d");for(var l in a)"default"!==l&&function(i){e.d(t,i,(function(){return a[i]}))}(l);var s,o=e("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=c.exports}}]);